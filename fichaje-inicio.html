<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Fichaje - Inicio</title>
    <link rel="stylesheet" href="./fichaje-inicio.css" />
</head>

<body>
    <div class="overlay">
        <div class="fichaje-container">

            <!-- ===== CARD PRINCIPAL ===== -->
            <div id="fichajeCard" class="fichaje-card state-sin-fichar">

                <!-- ===== HEADER SUPERIOR ===== -->
                <div class="fichaje-header">
                    <div class="datetime-block">
                        <span id="fechaText" class="fecha-text"></span>
                        <span id="horaText" class="hora-text"></span>
                    </div>

                    <div id="statusPill" class="status-pill">
                        <span class="status-dot"></span>
                        <span id="estadoText" class="status-text">SIN FICHAR</span>
                    </div>
                </div>

                <!-- ===== SAUDA√á√ÉO ===== -->
                <div class="fichaje-greeting">
                    <h2 class="greeting-hello">
                        Hola, <span id="nombreTecnico"></span>
                    </h2>
                </div>

                <!-- Mensaje principal del estado -->
                <div class="fichaje-message">
                    <p id="mensajeTexto">No has realizado fichajes en el d√≠a de hoy.</p>
                </div>

                <!-- ===== STEP WIZARD ===== -->
                <div id="stepper" class="stepper stepper-hidden">
                    <div class="step-bars">
                        <div class="step-bar"></div>
                        <div class="step-bar"></div>
                        <div class="step-bar"></div>
                    </div>
                    <span class="step-counter"><span id="stepActual">1</span>/3</span>
                </div>

                <!-- ===== VIEW: HOME ===== -->
                <div id="stepHome" class="step-view step-view-active">

                    <div class="fichaje-actions">
                        <button id="btnFicharEntrada" class="btn-action">
                            FICHAR ENTRADA AL TRABAJO
                        </button>

                        <button id="btnContinuarSistema" class="btn-action btn-secondary">
                            CONTINUAR AL SISTEMA
                        </button>

                        <button id="btnCerrarSesion" class="btn-action btn-secondary">
                            CERRAR SESI√ìN
                        </button>
                    </div>

                    <div class="fichaje-footer">
                        <p class="fichaje-note">
                            La ubicaci√≥n ser√° registrada autom√°ticamente al finalizar el fichaje
                        </p>
                    </div>
                </div>

                <!-- ===== VIEW: EPIS ===== -->
                <div id="stepEpis" class="step-view">

                    <div class="wizard-section">
                        <h2 class="wizard-title">EPIs de hoy</h2>
                        <p class="wizard-subtitle">
                            Sube al menos <strong>1 foto</strong> como evidencia.
                        </p>

                        <div id="episPendingAlert" class="wizard-alert wizard-alert-warning wizard-alert-hidden">
                            Tienes EPIs <strong>pendientes</strong>. Puedes completarlos ahora o al final de la jornada.
                        </div>

                        <div id="episError" class="wizard-alert wizard-alert-error wizard-alert-hidden"></div>

                        <div class="epis-uploads">
                            <div id="episThumbs" class="epis-thumbs"></div>
                            <div id="episCounter" class="epis-counter">0 fotos a√±adidas.</div>
                        </div>

                        <div class="wizard-button-row">
                            <button id="btnAddEpis" class="btn-secondary-white">
                                <img src="https://cdn-icons-png.flaticon.com/512/126/126477.png" class="icono-epis" />
                                A√±adir fotos
                            </button>
                            <input id="inputEpisFotos" type="file" class="hidden" multiple accept="image/*" />

                            <button id="btnPosponerEpis" class="btn-secondary-transparent">Posponer</button>
                        </div>

                        <div class="wizard-footer-right">
                            <button id="btnConfirmarEpis" class="btn-primary-blue">
                                Confirmar y seguir ‚Üí
                            </button>
                        </div>
                    </div>
                </div>

                <!-- ===== VIEW: SITIO ===== -->
                <div id="stepSitio" class="step-view">
                    <h2 class="wizard-title">¬øD√≥nde trabajar√°s hoy?</h2>
                    <p class="wizard-subtitle">
                        Selecciona obra, ruta o sede asignada.
                    </p>

                    <div id="listaSitios" class="wizard-list"></div>

                    <div class="wizard-footer-right">
                        <button id="btnConfirmarSitio" class="btn-primary-blue" disabled>
                            Confirmar sitio ‚Üí
                        </button>
                    </div>
                </div>

                <!-- ===== VIEW: TRANSPORTE ===== -->
                <div id="stepTransporte" class="step-view">
                    <h2 class="wizard-title">Transporte de hoy</h2>
                    <p class="wizard-subtitle">Indica si conducir√°s o ir√°s de pasajero.</p>

                    <div class="toggle-conduce">
                        <button id="btnHoyConduzco" class="toggle-pill">üöó Hoy conduzco</button>
                        <button id="btnHoyNoConduzco" class="toggle-pill">üë§ Hoy no conduzco</button>
                    </div>

                    <div id="listaVehiculos" class="wizard-list"></div>

                    <div class="wizard-footer-right">
                        <button id="btnGuardarJornada" class="btn-primary-green" disabled>
                            Guardar y empezar jornada
                        </button>
                    </div>
                </div>

                <!-- ===== VIEW: OPERANDO (ESTADO FINAL) ===== -->
                <div id="stepOperando" class="step-view">
                    <div class="fichaje-actions">
                        <button id="btnSalidaReceso" class="btn-action">
                            FICHAR SALIDA A RECESO
                        </button>

                        <button id="btnTerminarDia" class="btn-action">
                            TERMINAR D√çA DE TRABAJO
                        </button>

                        <button id="btnContinuarSistemaOperando" class="btn-action btn-secondary">
                            CONTINUAR AL SISTEMA
                        </button>

                        <button id="btnCerrarSesionOperando" class="btn-action btn-secondary">
                            CERRAR SESI√ìN
                        </button>
                    </div>

                    <div class="fichaje-footer">
                        <p class="fichaje-note">
                            La ubicaci√≥n ser√° registrada autom√°ticamente al finalizar el fichaje
                        </p>
                    </div>
                </div>
            </div>

            <!-- ===== BANNER ROXO ===== -->
            <button id="bannerEpis" class="epis-banner epis-banner-hidden">
                Tienes EPIs pendientes. Completar ahora
            </button>

            <!-- ===== RODAP√â ===== -->
            <div class="brand-footer">
                <span class="brand-logo">üõ†Ô∏è</span>
                <span class="brand-text">manomanitas.es</span>
            </div>
        </div>
    </div>

    <script src="./fichaje-inicio.js"></script>
</body>
</html>